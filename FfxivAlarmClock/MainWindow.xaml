<Window
    x:Class="FfxivAlarmClock.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FfxivAlarmClock"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="using:FfxivAlarmClock.Models"
    mc:Ignorable="d">

    <Grid DataContext="{x:Bind ViewModel}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition MinHeight="300"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" x:Name="TitleBar" >
            <Viewbox Height="16" Width="16" Margin="10,5">
                <Canvas Height="512" Width="512">
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M146.278,198.82C138.692,198.82 132.553,204.96 132.553,212.545 132.553,220.132 138.693,226.271 146.278,226.271 153.856,226.271 160.003,220.132 160.003,212.545 160.003,204.959 153.855,198.82 146.278,198.82z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M197.147,119.686C198.033,137.716 231.054,82.552 229.444,58.32 227.817,34.106 195.52,87.389 197.147,119.686z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M47.704,274.96L47.668,274.852C47.659,274.834 47.65,274.789 47.641,274.78 47.641,274.762 47.632,274.762 47.632,274.762L47.704,274.96z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M91.973,21.61L92.099,21.447C92.099,21.447 92.118,21.428 92.136,21.411 92.136,21.411 92.144,21.383 92.154,21.375L91.973,21.61z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M376.237,508.98L375.577,509.397C375.559,509.397,375.55,509.424,375.541,509.424L376.237,508.98z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M265.557,16.564L265.557,16.564 265.665,16.782 265.684,16.791z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M253.983,4.575C253.983,4.575,253.983,4.575,253.974,4.575L254.002,4.593 253.983,4.575z" />
                    <Path Stroke="DimGray" Fill="DimGray" Data="F1 M512,512z M0,0z M443.246,392.214C443.354,390.207 443.608,388.326 443.608,386.219 443.617,367.811 439.692,347.964 430.334,327.403 412.422,287.601 382.412,265.204 352.43,250.946L352.331,250.891 350.098,249.825 352.115,250.802C322.25,236.588,291.887,228.93,269.536,218.125L269.5,218.097C255.25,211.109,247.239,201.768,241.922,188.042L241.904,187.997 241.868,187.888 241.714,187.472 241.651,187.301C240.765,185.085,236.732,172.21,236.849,163.014L236.849,162.96 236.849,162.851C236.841,160.238,237.148,157.906,237.564,156.423L237.582,156.351C238.957,150.899,243.75,142.182,249.482,132.155L249.5,132.128C255.178,121.956 261.834,109.885 265.613,95.373 270.152,77.805 272.567,62.135 272.575,48.465 272.521,36.863 270.966,26.176 265.703,16.845L265.667,16.782C262.955,12.071 259.121,7.70400000000005 253.985,4.59400000000005 248.931,1.51900000000005 243.189,0.0640000000000454 237.439,0.0280000000000458L237.439,0.018 237.22,0 237.22,0.018C237.184,0.018,237.093,0.027,237.057,0.027L237.057,0.018C237.012,0.018 236.975,0.027 236.939,0.027 236.659,0.027 236.288,0.09 235.647,0.181 223.964,0.733 213.115,5.995 201.885,13.997L201.831,14.033C187.907,24.187 177.78,37.487 170.203,51.285 168.594,47.497 167.083,43.591 165.185,40.173L165.176,40.155C159.996,30.905,153.928,23.021,146.749,16.972L146.74,16.972C139.724,11.077,130.944,6.583,120.817,6.412L120.817,6.366 120.147,6.347C108.837,6.356 98.736,12.441 92.137,21.411 85.573,30.181 81.503,41.367 78.89,55.245L78.89,55.272C77.75,61.448,77.253,67.623,77.253,73.672L77.253,73.718C77.471,103.565 88.537,130.618 96.259,146.288 86.05,154.209 71.773,167.075 60.272,184.905L60.833,184.037 60.263,184.915C45.588,207.799 39.693,226.145 39.693,242.212 39.675,256.525 44.485,267.402 47.641,274.781 52.713,287.06 61.737,295.053 70.815,299.14L70.815,299.158C77.262,302.042,82.994,303.679,87.949,305.216L87.579,307.712 98.049,309.122C98.827,309.484,99.424,309.764,99.659,309.917L99.677,309.945C103.149,312.114 106.458,314.89 110.138,320.225 113.782,325.551 117.652,333.535 121.268,345.651L121.287,345.696C124.93,357.966,132.336,378.111,138.882,398.672L138.882,398.699C142.119,408.781 145.103,418.998 147.236,427.931 149.388,436.81 150.626,444.604 150.582,448.746L150.582,448.945 150.582,448.999 150.509,450.564C146.957,454.389 144.18,458.584 142.643,462.824 140.69,468.159 140.066,473.375 140.057,477.968L140.067,478.267 140.067,478.203C140.094,484.677 141.207,490.274 142.3,494.406 142.861,496.468 143.421,498.176 143.855,499.415L144.407,500.871 144.415,500.871 144.551,501.277 146.359,505.645 149.008,512.001 213.368,512.001 218.35,512.001 371.427,512.001 375.514,509.442 375.577,509.398C381.889,505.384 392.015,496.965 402.992,484.777 408.724,487.101 414.972,488.52 421.599,488.52 449.629,488.511 472.297,465.816 472.306,437.822 472.288,417.532 460.353,400.244 443.246,392.214z M421.6,465.272C414.747,465.272,408.58,462.668,403.661,458.409L398.445,453.861 394.267,459.367C382.857,474.467,370.441,484.775,364.646,488.744L226.162,488.744C226.515,486.691 227.102,484.35 228.133,482.035 230.276,477.342 233.657,472.966 240.909,470.263L236.497,458.129C225.692,461.99 219.371,469.721 216.315,476.828 214.352,481.294 213.539,485.418 213.168,488.745L164.903,488.745C164.125,485.933 163.294,482.099 163.312,478.166 163.348,472.876 164.632,468.365 168.285,465.236L169.27,464.386 168.302,465.218C170.744,463.102 172.064,460.363 172.814,457.659 173.574,454.928 173.836,452.071 173.836,448.997 173.745,434.187 167.733,412.83 161.033,391.618 154.324,370.559 146.783,349.954 143.582,339.094 138.573,322.122 132.407,310.549 125.48,302.222 134.323,303.226 139.992,303.759 140.038,303.759L141.205,290.892C141.196,290.892 136.838,290.486 129.622,289.69 123.274,288.994 114.685,287.945 105.082,286.624 99.4040000000001,284.101 93.9600000000001,282.628 89.331,281.226 84.421,279.761 80.379,278.297 77.197,276.126 74.0050000000001,273.92 71.391,271.09 69.041,265.71 65.823,258.187 62.956,251.36 62.947,242.21 62.947,232.02 66.6,218.169 79.846,197.454 87.902,184.849 98.354,174.614 106.763,167.633 110.977,164.134 114.665,161.449 117.288,159.641 118.59,158.736 119.62,158.067 120.326,157.615L121.104,157.127 121.33,156.991 126.981,153.628 123.509,148.031 123.293,147.669C120.851,143.781 100.381,107.903 100.508,73.6709999999998 100.508,68.8789999999998 100.896,64.1229999999998 101.756,59.4939999999998 103.908,47.7939999999998 107.271,39.8909999999998 110.707,35.3879999999998 114.251,30.8679999999998 117.181,29.6829999999998 120.345,29.6109999999998 123.392,29.5839999999998 127.397,31.1029999999998 131.801,34.7829999999998 145.093,45.6789999999998 158.909,74.8469999999998 159.966,111.033 157.579,122.489 156.837,130.201 156.81,130.373L169.668,131.612C169.668,131.612 169.767,130.599 170.029,128.62 170.934,121.685 173.836,103.555 180.853,84.2609999999998 187.824,64.9389999999998 198.991,44.6669999999998 215.447,32.8769999999998 225.121,25.8509999999998 232.672,23.2019999999998 237.139,23.2749999999998 239.228,23.2749999999998 240.665,23.7169999999998 241.939,24.4769999999998 243.793,25.5979999999998 245.629,27.7779999999998 247.057,31.8289999999998 248.476,35.8339999999998 249.336,41.4939999999998 249.326,48.4659999999998 249.336,59.3339999999998 247.3,73.3489999999998 243.105,89.5329999999998 240.266,100.555 234.805,110.836 229.217,120.736 223.666,130.664 217.942,140.14 215.13,150.284 214.009,154.416 213.602,158.675 213.602,162.852 213.665,179.589 219.968,195.629 220.166,196.244L220.157,196.244C227.065,214.843 240.139,229.906 259.489,239.102 285.132,251.3 315.168,258.813 342.375,271.914 369.591,285.061 393.769,303.208 409.158,337.015 417.205,354.755 420.342,371.13 420.352,386.22 420.352,392.098 419.863,397.776 418.996,403.273L417.93,409.946 424.656,410.706C438.39,412.243 449.069,423.735 449.06,437.822 449.033,452.966 436.772,465.245 421.6,465.272z" />
                    <Path Stroke="DimGray" Data="F1 M512,512z M0,0z M430.335,327.403L430.335,327.403 430.335,327.403 430.344,327.421z" />
                </Canvas>
            </Viewbox>
            <TextBlock FontWeight="Bold" VerticalAlignment="Center">勤劳的兔兔</TextBlock>
            <TextBlock Margin="10,0" VerticalAlignment="Center">FFXIV 采集信息提醒程序</TextBlock>
        </StackPanel>
        <GridView IsEnabled="{Binding Ready}" ItemsSource="{Binding Favorite}" Grid.Row="1" Padding="10">
            <GridView.Resources>
                <model:ColorConverter x:Key="cc" />
                <Style TargetType="GridViewItem">
                    <Style.Setters>
                        <Setter Property="Background" Value="WhiteSmoke"/>
                    </Style.Setters>
                </Style>
            </GridView.Resources>
            <GridView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="10" Width="400" Height="220">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding NameJp}" FontSize="22"/>
                        <StackPanel Grid.Column="1" VerticalAlignment="Bottom" Orientation="Horizontal">
                            <TextBlock Text="{Binding NameCn}"/>
                            <TextBlock Text="{Binding NameEn}" Margin="5,0"/>
                        </StackPanel>
                        <!--<ProgressRing Grid.Column="1" Margin="3" IsIndeterminate="False" IsActive="True"
                                      Value="{Binding Value}" Maximum="{Binding Maximum}"
                                      Foreground="{Binding Active, Converter={StaticResource cc}}"/>-->
                        <ProgressBar Grid.Row="1" Grid.ColumnSpan="2" Margin="0,5" Value="{Binding Value}" Maximum="{Binding Maximum}" Foreground="{Binding Active, Converter={StaticResource cc}}"/>
                        <ListView Grid.Row="2" Grid.ColumnSpan="2" ItemsSource="{Binding Maps}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Padding="3">
                                        <StackPanel Width="180">
                                            <TextBlock Text="{Binding MapJp}"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding MapCn}" FontSize="10"/>
                                                <TextBlock Text="{Binding MapEn}" FontSize="10" Margin="5,0"/>
                                            </StackPanel>
                                            <ProgressBar Value="{Binding Value}" Maximum="{Binding Maximum}" Margin="0,3"
                                                         Foreground="{Binding Active, Converter={StaticResource cc}}"/>
                                        </StackPanel>
                                        <StackPanel Margin="10,0" >
                                            <TextBlock Text="{Binding TimeSpan}" FontSize="20"/>
                                            <TextBlock Text="{Binding Position}"/>
                                        </StackPanel>
                                    </StackPanel>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </Grid>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>
        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="8*"/>
                <ColumnDefinition Width="5*"/>
            </Grid.ColumnDefinitions>
            <Border Padding="30" Margin="10,0" Grid.RowSpan="2" CornerRadius="5" Background="DarkSlateBlue">
                <StackPanel VerticalAlignment="Center">
                    <StackPanel.Resources>
                        <Style TargetType="TextBlock">
                            <Style.Setters>
                                <Setter Property="Foreground" Value="White"></Setter>
                            </Style.Setters>
                        </Style>
                    </StackPanel.Resources>
                    <TextBlock>游戏时间</TextBlock>
                    <TextBlock Text="{Binding EorzeaTimeExp}" FontSize="28" Margin="0,0,0,20"/>
                    <TextBlock>本地时间</TextBlock>
                    <TextBlock Text="{Binding LocalTime}" FontSize="22"/>
                    <TextBlock Text="{Binding LocalDate}" TextAlignment="Right"/>
                </StackPanel>
            </Border>
            <ListView ItemsSource="{Binding Table}" IsEnabled="{Binding Ready}" Grid.Column="1"
                      SelectedItem="{Binding Selected, Mode=TwoWay}" SelectionMode="Single">
                <ListView.Resources>
                    <model:JobConverter x:Key="jc"/>
                </ListView.Resources>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Padding="3">
                            <CheckBox IsChecked="{Binding Checked, Mode=TwoWay}" Width="60"/>
                            <StackPanel Margin="10,0" Width="220">
                                <TextBlock Text="{Binding NameJp}"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding NameCn}" FontSize="10"/>
                                    <TextBlock Text="{Binding NameEn}" FontSize="10" Margin="5,0"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel>
                                <TextBlock Text="{Binding Version}" FontSize="10"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Job, Converter={StaticResource jc}}"/>
                                    <TextBlock Text="{Binding Level}" Margin="10,0"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <GridView Grid.Column="2" ItemsSource="{Binding Selected.Maps}" Background="WhiteSmoke" Padding="10">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="5">
                            <TextBlock Text="{Binding MapJp}"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding MapCn}" FontSize="10"/>
                                <TextBlock Text="{Binding MapEn}" FontSize="10" Margin="5,0"/>
                            </StackPanel>
                            <TextBlock Margin="10,0" Text="{Binding TimeSpan}" FontSize="22"/>
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
            <TextBox Grid.Column="1" Grid.Row="1" Text="{Binding Query,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" KeyDown="TextBox_KeyDown"/>
            <StackPanel Orientation="Horizontal" Grid.Row="1"  Grid.Column="2" Padding="10,0" Background="Gray">
                <CheckBox IsChecked="{Binding EnableAlarm}" HorizontalAlignment="Center">启用通知</CheckBox>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
